# ═══════════════════════════════════════════════════════════════════════
# ONEE Horizon Forecast Configuration - SRM (Regional)
# ═══════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────
# PILLAR 1: PROJECT
# ───────────────────────────────────────────────────────────────────────
project:
  project_root: .  # Will be resolved to absolute path
  exp_name: exp
  output_base_dir: outputs/outputs_horizon

# ───────────────────────────────────────────────────────────────────────
# PILLAR 2: DATA
# ───────────────────────────────────────────────────────────────────────
data:
  target_variable: consommation_kwh
  unit: Kwh
  impute_2020: false
  
  # Regions to process
  regions:
    - Casablanca-Settat
    - Béni Mellal-Khénifra
    - Drâa-Tafilalet
    - Fès-Meknès
    - Laâyoune-Sakia El Hamra
    - Marrakech-Safi
    - Oriental
    - Rabat-Salé-Kénitra
    - Tanger-Tétouan-Al Hoceïma
    - Souss-Massa
  
  # Run levels:
  # 1: SRM
  run_levels: [1]
  
  # Database paths (relative to project_root)
  db_path: data/all_data.db


# ───────────────────────────────────────────────────────────────────────
# PILLAR 3: TEMPORAL
# ───────────────────────────────────────────────────────────────────────
temporal:
  horizon: 5
  forecast_runs:
    - [2013, 2018]

# ───────────────────────────────────────────────────────────────────────
# PILLAR 4: FEATURES
# ───────────────────────────────────────────────────────────────────────
features:
  transforms:
    - [lchg]
    - [lchg, lag_lchg]
  
  lags:
    - [1, 2]
  
  feature_block:
    - []
    - [pib_mdh]
    - [gdp_primaire, gdp_secondaire, gdp_tertiaire]
    - [pib_mdh, gdp_primaire, gdp_secondaire, gdp_tertiaire]
  
  use_pf: [false]
  use_clients: [true]
  training_window: [null]

# ───────────────────────────────────────────────────────────────────────
# PILLAR 5: MODELS
# ───────────────────────────────────────────────────────────────────────
models:
  r2_threshold: 0.6
  
  models:
    # ─── Gaussian Process Model ───
    - model_type: GaussianProcessForecastModel
      # GP-specific
      # Kernel options: null (default), 'rbf_white', 'matern_white', 'rbf_dot_white', 'matern_smooth', 'rbf_long'
      kernel_key: ["rbf_white"]
      n_restarts_optimizer: [10]
      normalize_y: [true, false]
      use_log_transform: [true]
      alpha: [1e-10]
      
      # Outlier detection
      remove_outliers: [False]
      outlier_threshold: [2.5]
      
      # Prior Configuration - list of prior configs to try
      prior_config:
        - type: LinearGrowthPrior
          min_annual_growth: 0.02
          anchor_window: 3
        # - type: PowerGrowthPrior
        #   power: 0.5
        #   anchor_window: 3
        #   min_annual_growth: 0.02
        # - type: FlatPrior
        #   method: mean
        # - type: NeutralPrior
